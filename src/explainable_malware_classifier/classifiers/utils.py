import pandas as pd
from matplotlib import pyplot as plt

from explainable_malware_classifier.settings import DATASETS_DIR_PATH, PLOTS_DIR_PATH


def load_dataset(name: str) -> pd.DataFrame:
    dataset_path = DATASETS_DIR_PATH / name
    if not dataset_path.exists():
        raise FileNotFoundError(
            f"Dataset '{name}' not found in the datasets directory '{DATASETS_DIR_PATH}'."
        )
    return pd.read_csv(dataset_path)


def save_plot(title: str, save_as: str) -> None:
    plt.title(title)
    plt.tight_layout()
    if "." not in save_as:
        save_as += ".png"
    save_path = PLOTS_DIR_PATH / save_as
    save_path.parent.mkdir(parents=True, exist_ok=True)
    plt.savefig(save_path, bbox_inches="tight")
