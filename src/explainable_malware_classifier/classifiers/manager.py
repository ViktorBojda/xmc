from enum import StrEnum

from explainable_malware_classifier.classifiers import (
    MalwareClassifierBRF,
    MalwareClassifierMLP,
    MalwareClassifierXGB,
)


class ClassifierType(StrEnum):
    BRF = "Balanced Random Forest"
    XGB = "XGBoost"
    MLP = "Multilayer Perceptron"


classifiers = {
    ClassifierType.BRF: MalwareClassifierBRF,
    ClassifierType.XGB: MalwareClassifierXGB,
    ClassifierType.MLP: MalwareClassifierMLP,
}

if __name__ == "__main__":
    classifier_types = list(classifiers.keys())
    print("Choose which classifier to run, options are:")
    for i, classifier_type in enumerate(classifier_types):
        print(f"{i + 1}.", classifier_type)
    while True:
        user_input = input("Enter the classifier number: ")
        try:
            user_input = int(user_input) - 1
            clf = classifiers.get(classifier_types[user_input])()
        except (ValueError, IndexError):
            print("Invalid input. Please try again.")
            continue
        break
    clf.run()
